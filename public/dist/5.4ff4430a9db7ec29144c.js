(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{GMdP:function(e,t,a){"use strict";a.r(t);var i=a("e7F3"),r=a("TJPC"),o=a("enAU");Object(i.c)("required",r.g),Object(i.c)("email",r.b),Object(i.c)("max",r.d),Object(i.c)("min",r.e),Object(i.c)("numeric",r.f),Object(i.c)("between",r.a),Object(i.d)("id",o);var l={components:{ValidationObserver:i.a,ValidationProvider:i.b},props:{slug:{type:String,default:""},uri:{type:String,required:!0},redirectUri:{type:String,required:!0},dataUri:{type:String,default:""},deleteText:{type:String,default:"Delete"},deleteIcon:{type:String,default:"mdi-trash-can-outline"},deleteColor:{type:String,default:"red lighten-1"},deleteConfirmationText:{type:String,default:"Are you sure want to delete this file ?"},deleteCancelText:{type:String,default:"Cancel"}},data:function(){return{promptDelete:!1,field_state:!1,formAlert:!1,deleteLoader:!1,formAlertText:"",formAlertState:"info",menu2:!1,modal:!1,form_data:{booking_id:"",profession:"",ktp_pemohon:"",submission_date:(new Date).toISOString().substr(0,10)},delete_file_type:"",files:[{title:"Fotocopy KTP Pemohon",file_name:"file_ktp_pemohon",url:"",showcase:""},{title:"Fotocopy KTP Suami/Istri",file_name:"file_ktp_suami_istri",url:"",showcase:""},{title:"Fotocopy NPWP",file_name:"file_npwp",url:"",showcase:""},{title:"Fotocopy Kartu Keluarga",file_name:"file_kk",url:"",showcase:""},{title:"Fotocopy Buku Nikah",file_name:"file_surat_nikah",url:"",showcase:""},{title:"Fotocopy Rekening Tabungan",file_name:"file_rekening_tabungan",url:"",showcase:""},{title:"Asli Slip Gaji (3 Bln Terakhir)",file_name:"file_slip_gaji",url:"",showcase:""},{title:"Surat Keterangan Kerja",file_name:"file_keterangan_kerja",url:"",showcase:""},{title:"Fotocopy R/K Tab.3 bln Terakhir",file_name:"file_tabungan_3_bulan_terakhir",url:"",showcase:""},{title:"Rek. Koran 6 Bln Bagi Pengusaha",file_name:"file_rekening_koran",url:"",showcase:""},{title:"Fotocopy SIUP",file_name:"file_siup",url:"",showcase:""},{title:"Fotocopy TDP/NIB",file_name:"file_tdp",url:"",showcase:""},{title:"Fotocopy Akte Pendirian/Perubahan",file_name:"file_akta",url:"",showcase:""},{title:"Fotocopy Akte Pengesahan Menkeh",file_name:"file_pengesahan",url:"",showcase:""},{title:"Fotocopy Izin Praktek",file_name:"file_izin_praktek",url:"",showcase:""},{title:"SK Domisili",file_name:"file_sk_domisili",url:"",showcase:""},{title:"Surat Keterangan Usaha/Sewa",file_name:"file_keterangan_usaha",url:"",showcase:""},{title:"SPT",file_name:"file_spt",url:"",showcase:""}]}},mounted:function(){this.setData()},methods:{pairingUploadedUrl:function(e){_.forEach(this.files,(function(t){var a,i,r="url_"+t.file_name;t.url=null!==(a=e[r])&&void 0!==a?a:"",t.showcase=null!==(i=e[t.file_name])&&void 0!==i?i:""}))},setData:function(){var e=this;this.dataUri&&(this.field_state=!0,axios.get(this.dataUri).then((function(t){if(t.data.success){var a=t.data.data;console.log(a),e.form_data={booking_id:a.id,slug:a.slug,client_name:a.client.client_name,client_profession:a.client.profession,unit_name:a.unit.unit_number+"/"+a.unit.unit_block,unit_price:e.number_format(a.total_amount),submission_date:a.document.submission_date},e.pairingUploadedUrl(a.document),e.field_state=!1}else e.formAlert=!0,e.formAlertState="error",e.formAlertText=t.data.message,e.field_state=!1})).catch((function(t){e.tableAlert=!0,e.tableAlertState="error",e.tableAlertText="Oops, something went wrong. Please try again later.",e.field_state=!1})))},submit:function(){var e=this;this.$refs.observer.validate().then((function(t){t&&e.postFormData()}))},clear:function(){this.form_data={},this.$refs.observer.reset()},postFormData:function(){var e=this,t=new FormData(this.$refs["post-form"]);this.dataUri&&(t.append("_method","put"),t.append("booking_id",this.form_data.booking_id),t.append("submission_date",this.form_data.submission_date)),this.field_state=!0,axios.post(this.uri,t).then((function(t){t.data.success?(e.formAlert=!0,e.formAlertState="success",e.formAlertText=t.data.message,setTimeout((function(){e.goto(e.redirectUri)}),6e3)):(e.formAlert=!0,e.formAlertState="error",e.formAlertText=t.data.message,e.field_state=!1)})).catch((function(t){e.tableAlert=!0,e.tableAlertState="error",e.tableAlertText="Oops, something went wrong. Please try again later.",e.field_state=!1}))},promptDeleteItem:function(e){this.promptDelete=!0,this.delete_file_type=e},removeUploadedFile:function(){var e=this,t=new FormData;axios.delete(this.base_url()+this.ziggy("document.remove-file",[this.slug,this.delete_file_type]).url(),t).then((function(t){t.data.success?(e.formAlert=!0,e.formAlertState="success",e.formAlertText=t.data.message):(e.formAlert=!0,e.formAlertState="error",e.formAlertText=t.data.message),e.deleteLoader=!1,e.promptDelete=!1,e.setData()})).catch((function(t){e.formAlert=!0,e.formAlertState="error",e.formAlertText="Oops, something went wrong. Please try again later.",e.deleteLoader=!1,e.promptDelete=!1}))}}},n=a("KHd+"),s=Object(n.a)(l,void 0,void 0,!1,null,null,null);t.default=s.exports}}]);