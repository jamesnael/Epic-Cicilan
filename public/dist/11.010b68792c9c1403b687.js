(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{LKZJ:function(a,t,e){"use strict";e.r(t);var r=e("e7F3"),o=e("TJPC"),n=e("enAU");e("wd/R");Object(r.c)("required",o.h),Object(r.c)("email",o.c),Object(r.c)("max",o.e),Object(r.c)("min",o.f),Object(r.c)("numeric",o.g),Object(r.c)("between",o.a),Object(r.d)("id",n);var i={components:{ValidationObserver:r.a,ValidationProvider:r.b},props:{uri:{type:String,required:!0},redirectUri:{type:String,required:!0},dataUri:{type:String,default:""}},data:function(){return{field_state:!1,formAlert:!1,formAlertText:"",formAlertState:"info",date:(new Date).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1,menu3:!1,menu4:!1,time:null,dialog:!1,datepicker:!1,cancel_reason:"",items_approval:["Approved","Pending"],form_data:{booking_id:"",akad_date:"",akad_time:"",location:"",address:"",dokumen_awal:"",approval_client_status:"",approval_developer_status:"",approval_notaris_status:"",akad_sign_date:"",akad_doc_sign_file_name:"",total_kpr:""}}},computed:{},mounted:function(){this.setData()},methods:{setData:function(){var a=this;this.dataUri&&(this.field_state=!0,axios.get(this.dataUri).then((function(t){if(t.data.success){var e=t.data.data;a.form_data={slug:e.slug,booking_id:e.id,client_name:e.client.client_name,client_mobile_number:e.client.client_mobile_number,unit_number:e.unit.unit_number+"/"+e.unit.unit_block,unit_price:a.moneyFormat(e.total_amount),sales_name:e.sales.user.full_name,agency_name:e.sales.agency?e.sales.agency.agency_name:"",akad_date:e.akad_kpr?e.akad_kpr.akad_date:"",akad_time:e.akad_kpr?e.akad_kpr.akad_time:"",location:e.akad_kpr?e.akad_kpr.location:"",address:e.akad_kpr?e.akad_kpr.address:"",ppjb_date:e.ppjb?e.ppjb.ppjb_date:"",dokumen_awal_akad:e.akad_kpr?e.akad_kpr.akad_doc_file_name:"",url_dokumen_awal:e.akad_kpr?e.akad_kpr.url_akad_doc_file_name:"",approval_client_status:e.akad_kpr?e.akad_kpr.approval_client_status:"",approval_developer_status:e.akad_kpr?e.akad_kpr.approval_developer_status:"",approval_notaris_status:e.akad_kpr?e.akad_kpr.approval_notaris_status:"",akad_sign_date:e.akad_kpr?e.akad_kpr.akad_sign_date:"",dokumen_akhir_akad:e.akad_kpr?e.akad_kpr.akad_doc_sign_file_name:"",url_dokumen_akhir:e.akad_kpr?e.akad_kpr.url_akad_doc_sign_file_name:"",total_kpr:e.akad_kpr?e.akad_kpr.total_kpr:""},a.field_state=!1}else a.formAlert=!0,a.formAlertState="error",a.formAlertText=t.data.message,a.field_state=!1})).catch((function(t){a.tableAlert=!0,a.tableAlertState="error",a.tableAlertText="Oops, something went wrong. Please try again later.",a.field_state=!1})))},submit:function(){var a=this;this.$refs.observer.validate().then((function(t){t&&a.postFormData()}))},postFormData:function(){var a=this,t=new FormData(this.$refs["post-form"]);this.dataUri&&(t.append("_method","put"),t.append("booking_id",this.form_data.booking_id),t.append("akad_date",this.form_data.akad_date),t.append("akad_time",this.form_data.akad_time)),this.field_state=!0,axios.post(this.uri,t).then((function(t){t.data.success?(a.formAlert=!0,a.formAlertState="success",a.formAlertText=t.data.message,setTimeout((function(){a.goto(a.redirectUri)}),6e3)):(a.formAlert=!0,a.formAlertState="error",a.formAlertText=t.data.message,a.field_state=!1)})).catch((function(t){a.tableAlert=!0,a.tableAlertState="error",a.tableAlertText="Oops, something went wrong. Please try again later.",a.field_state=!1}))},moneyFormat:function(a){var t=isFinite(+a)?+a:0,e=isFinite(0)?Math.abs(0):0,r=(e?function(a,t){var e=Math.pow(10,t);return Math.round(a*e)/e}(t,e):Math.round(t)).toString().split(".");return r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,".")),(r[1]||"").length<e&&(r[1]=r[1]||"",r[1]+=new Array(e-r[1].length+1).join("0")),r.join(",")},cancelAkad:function(){var a=this,t=new FormData(this.$refs["put-form"]);t.append("_method","put"),t.append("reject_reason",this.cancel_reason),axios.post(this.base_url()+this.ziggy("akad.cancel",[this.form_data.slug]).url(),t).then((function(t){t.data.success?(a.formAlert=!0,a.formAlertState="success",a.formAlertText=t.data.message,setTimeout((function(){a.goto(a.redirectUri)}),3e3)):(a.formAlert=!0,a.formAlertState="error",a.formAlertText=t.data.message),a.deleteLoader=!1,a.promptDelete=!1,a.setData()})).catch((function(t){a.formAlert=!0,a.formAlertState="error",a.formAlertText="Oops, something went wrong. Please try again later.",a.deleteLoader=!1,a.promptDelete=!1}))}}},d=e("KHd+"),s=Object(d.a)(i,void 0,void 0,!1,null,null,null);t.default=s.exports}}]);