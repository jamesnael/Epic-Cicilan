(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{MQK5:function(t,e,a){"use strict";a.r(e);var r=a("e7F3"),n=a("TJPC"),i=a("enAU");Object(r.c)("required",n.h),Object(r.c)("email",n.c),Object(r.c)("max",n.e),Object(r.c)("min",n.f),Object(r.c)("numeric",n.g),Object(r.c)("between",n.a),Object(r.d)("id",i);var o={components:{ValidationObserver:r.a,ValidationProvider:r.b},props:{uri:{type:String,required:!0},redirectUri:{type:String,required:!0},dataUri:{type:String,default:""},filter_client:{type:Array,default:function(){return[]}},filter_sales:{type:Array,default:function(){return[]}}},data:function(){return{field_state:!1,formAlert:!1,formAlertText:"",formAlertState:"info",cancel_reason:"",dialog:!1,menu:!1,modal:!1,modal2:!1,menu2:!1,menu3:!1,menu4:!1,time:null,datepicker:!1,files:[{title:"Document PPJB",file_name:"ppjb_doc_file_name",url:"",showcase:""},{title:"Document PPJB Sudah Ditandatangani",file_name:"ppjb_doc_sign_name",url:"",showcase:""}],form_data:{client_name:"",phone_number:"",unit:"",unit_price:"",status_ppjb:"",ppjb_sign_date:(new Date).toISOString().substr(0,10),sales_name:"",agent_name:"",ppjb_date:(new Date).toISOString().substr(0,10),ppjb_time:"",location:"",address:"",approval_client_status:"",approval_developer_status:"",approval_notaris_status:"",url_file_doc:"",url_file_doc_sign:"",booking_id:""}}},mounted:function(){this.setData()},methods:{setData:function(){var t=this;this.dataUri&&(this.field_state=!0,axios.get(this.dataUri).then((function(e){if(e.data.success){var a=e.data.data;t.form_data={slug:a.slug,client_name:a.client.client_name,phone_number:a.client.client_phone_number,unit:a.unit.unit_number+"/"+a.unit.unit_block,unit_type:a.unit.unit_type+" "+a.unit.unit_number+"/"+a.unit.unit_block,unit_price:a.total_amount,sales_name:a.sales.user.full_name,agent_name:a.sales.agency.agency_name,booking_id:a.document.booking_id,ppjb_date:a.document.submission_date,ppjb_doc_file_name:a.ppjb?a.ppjb.ppjb_doc_file_name:"",ppjb_doc_sign_file_name:a.ppjb?a.ppjb.ppjb_doc_sign_file_name:"",address:a.ppjb?a.ppjb.address:"",location:a.ppjb?a.ppjb.location:"",ppjb_time:a.ppjb?a.ppjb.ppjb_time:"",approval_client_status:a.ppjb?a.ppjb.approval_client_status:"",approval_notaris_status:a.ppjb?a.ppjb.approval_notaris_status:"",approval_developer_status:a.ppjb?a.ppjb.approval_developer_status:"",ppjb_sign_date:a.ppjb?a.ppjb.ppjb_sign_date:"",ppjb_sign_date_data:a.ppjb?a.ppjb.ppjb_sign_date:"",url_file_doc:a.ppjb?a.ppjb.url_file_doc:"    ",url_file_doc_sign:a.ppjb?a.ppjb.url_file_doc_sign:""},t.unit_price=a.total_amount,t.field_state=!1}else t.formAlert=!0,t.formAlertState="error",t.formAlertText=e.data.message,t.field_state=!1})).catch((function(e){t.tableAlert=!0,t.tableAlertState="error",t.tableAlertText="Oops, something went wrong. Please try again later.",t.field_state=!1})))},submit:function(){var t=this;this.$refs.observer.validate().then((function(e){e&&t.postFormData()}))},clear:function(){this.form_data={ppjb_date:"",ppjb_time:"",location:"",address:"",status_ppjb:"",approval_client_status:"",approval_developer_status:"",approval_notaris_status:"",ppjb_doc_file_name:"",ppjb_doc_sign_file_name:"",ppjb_sign_date:"",booking_id:"",url_file_doc:"",url_file_doc_sign:""},this.$refs.observer.reset()},postFormData:function(){var t=this,e=new FormData(this.$refs["post-form"]);e.append("booking_id",this.form_data.booking_id),this.dataUri&&(e.append("_method","put"),e.append("ppjb_sign_date",this.form_data.ppjb_sign_date),e.append("ppjb_date",this.form_data.ppjb_date)),this.field_state=!0,axios.post(this.uri,e).then((function(e){e.data.success?(t.formAlert=!0,t.formAlertState="success",t.formAlertText=e.data.message,setTimeout((function(){t.goto(t.redirectUri)}),6e3)):(t.formAlert=!0,t.formAlertState="error",t.formAlertText=e.data.message,t.field_state=!1)})).catch((function(e){t.tableAlert=!0,t.tableAlertState="error",t.tableAlertText="Oops, something went wrong. Please try again later.",t.field_state=!1}))},showFormattedDt:function(t){return moment(t,"YYYY-MM-DD").format("DD-MMM-YYYY")},cancelPpjb:function(){var t=this,e=new FormData(this.$refs["put-form"]);e.append("_method","put"),e.append("reject_reason",this.cancel_reason),axios.post(this.base_url()+this.ziggy("ppjb.cancel",[this.form_data.slug]).url(),e).then((function(e){e.data.success?(t.formAlert=!0,t.formAlertState="success",t.formAlertText=e.data.message,setTimeout((function(){t.goto(t.redirectUri)}),3e3)):(t.formAlert=!0,t.formAlertState="error",t.formAlertText=e.data.message),t.deleteLoader=!1,t.promptDelete=!1,t.setData()})).catch((function(e){t.formAlert=!0,t.formAlertState="error",t.formAlertText="Oops, something went wrong. Please try again later.",t.deleteLoader=!1,t.promptDelete=!1}))}}},s=a("KHd+"),p=Object(s.a)(o,void 0,void 0,!1,null,null,null);e.default=p.exports}}]);