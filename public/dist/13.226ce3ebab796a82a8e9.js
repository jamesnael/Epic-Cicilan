(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{mq8b:function(t,e,a){"use strict";a.r(e);var n=a("e7F3"),i=a("TJPC"),r=a("enAU");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object(n.c)("required",i.h),Object(n.c)("email",i.c),Object(n.c)("max",i.e),Object(n.c)("min",i.f),Object(n.c)("numeric",i.g),Object(n.c)("between",i.a),Object(n.d)("id",r);var m={components:{ValidationObserver:n.a,ValidationProvider:n.b},props:{uri:{type:String,required:!0},redirectUri:{type:String,required:!0},dataUri:{type:String,default:""},filter_client:{type:Array,default:function(){return[]}},filter_sales:{type:Array,default:function(){return[]}},filter_unit_type:{type:Array,default:function(){return[]}},filter_tipe_programs:{type:Array,default:function(){return[]}}},data:function(){var t;return{field_state:!1,formAlert:!1,formAlertText:"",formAlertState:"info",date:(new Date).toISOString().substr(0,10),menu:!1,menu2:!1,modal:!1,datepicker:!1,form_data:(t={unit_type:"",client_name:"",unit_number:"",unit_address:"",surface_area:"",building_area:"",utj:"",electrical_power:"",points:"",closing_fee:"",total_amount:"",ppn:"",payment_type:"",payment_method:"",dp_amount:"",first_payment:"",principal:"",installment:"",installment_time:"",due_date:"",amount:"",credits:"",payment_method_utj:"",bank_name:"",card_number:"",point:"",client_id:""},o(t,"client_name",""),o(t,"client_email",""),o(t,"client_phone_number",""),o(t,"client_mobile_number",""),o(t,"client_addres",""),o(t,"sales_id",""),o(t,"sales_name",""),o(t,"agency_name",""),o(t,"main_coordinator",""),o(t,"regional_coordinator",""),o(t,"nup_amount","0"),o(t,"utj_amount","0"),o(t,"payment_method_nup",""),o(t,"nup_date",""),o(t,"utj_date",""),o(t,"id_unit_type",""),o(t,"main_coor_id",""),o(t,"regional_coor_id",""),o(t,"agent_id",""),o(t,"program_id",""),o(t,"deal_closer",""),t),program:{nama_program:"",harga_termasuk:[],harga_tidak_termasuk:[],gimmick:"",keterangan:""},total_amount:"0",first_payment:"0",dp_amount:"0",dp_percent:"0",installment_time:"",due_date:"",payment_method:"",payment_type:"",credits:"0"}},computed:{hargaExcludePPN:function(){return this.total_amount&&_.isNumber(parseInt(this.total_amount))?_.round(parseInt(this.total_amount)/1.1,0):0},principal:function(){return"KPR/KPA"==this.payment_type?(this.credits=parseInt(this.total_amount)-parseInt(this.dp_amount),parseInt(this.dp_amount)-parseInt(this.form_data.nup_amount)-parseInt(this.form_data.utj_amount)):(this.credits="0",parseInt(this.total_amount)-parseInt(this.form_data.nup_amount)-parseInt(this.form_data.utj_amount))},installment:function(){return""==this.principal&&""==this.installment_time?"0":((parseInt(this.principal)-parseInt(this.first_payment))/(parseInt(this.installment_time)-1)).toFixed()}},mounted:function(){this.setData()},methods:{setData:function(){var t=this;this.dataUri&&(this.field_state=!0,axios.get(this.dataUri).then((function(e){if(e.data.success){var a=e.data.data;t.form_data={id_unit_type:a.unit.id_unit_type,unit_type:a.unit.unit_type,unit_block:a.unit.unit_block,unit_number:a.unit.unit_number,unit_address:a.unit.unit_address,surface_area:a.unit.surface_area,building_area:a.unit.building_area,utj:a.unit.utj,electrical_power:a.unit.electrical_power,points:a.unit.points,closing_fee:a.unit.closing_fee,total_amount:a.total_amount,ppn:a.ppn,payment_type:a.payment_type,payment_method:a.payment_method,dp_amount:a.dp_amount,first_payment:a.first_payment,principal:a.principal,installment:a.installment,installment_time:a.installment_time,due_date:a.due_date,credits:a.credits,amount:a.amount,payment_method_utj:a.payment_method_utj,bank_name:a.bank_name,card_number:a.card_number,point:a.point,client_id:a.client_id,client_name:a.client.client_name,client_number:a.client.client_number,client_email:a.client.client_email,client_phone_number:a.client.client_phone_number,client_mobile_number:a.client.client_mobile_number,client_address:a.client.client_address,sales_name:a.sales.user.full_name,agency_name:a.sales.agency?a.sales.agency.agency_name:"",main_coordinator:a.sales.main_coordinator?a.sales.main_coordinator.full_name:"",regional_coordinator:a.sales.regional_coordinator?a.sales.regional_coordinator.full_name:"",nup_amount:a.nup_amount,utj_amount:a.utj_amount,payment_method_nup:a.payment_method_nup,nup_date:a.nup_date,utj_date:a.utj_date,sales_id:a.sales.id,main_coor_id:a.sales.main_coordinator_id,regional_coor_id:a.sales.regional_coordinator_id,agent_id:a.sales.agency_id,program_id:a.program_id,deal_closer:a.deal_closer},t.total_amount=a.total_amount,t.first_payment=a.first_payment,t.dp_amount=a.dp_amount,t.dp_percent=a.dp_percent,t.installment_time=a.installment_time,t.due_date=a.due_date,t.payment_method=a.payment_method,t.payment_type=a.payment_type,t.credits=a.credits,t.setSelectedProgram(),t.field_state=!1}else t.formAlert=!0,t.formAlertState="error",t.formAlertText=e.data.message,t.field_state=!1})).catch((function(e){t.tableAlert=!0,t.tableAlertState="error",t.tableAlertText="Oops, something went wrong. Please try again later.",t.field_state=!1})))},submit:function(){var t=this;this.$refs.observer.validate().then((function(e){e&&t.postFormData()}))},clear:function(){this.form_data={},this.$refs.observer.reset()},postFormData:function(){var t=this,e=new FormData(this.$refs["post-form"]);this.dataUri&&(e.append("_method","put"),e.append("utj_date",this.form_data.utj_date),e.append("nup_date",this.form_data.nup_date)),e.append("utj_date",this.form_data.utj_date),e.append("nup_date",this.form_data.nup_date),this.field_state=!0,axios.post(this.uri,e).then((function(e){e.data.success?(t.formAlert=!0,t.formAlertState="success",t.formAlertText=e.data.message,setTimeout((function(){t.goto(t.redirectUri)}),6e3)):(t.formAlert=!0,t.formAlertState="error",t.formAlertText=e.data.message,t.field_state=!1)})).catch((function(e){t.tableAlert=!0,t.tableAlertState="error",t.tableAlertText="Oops, something went wrong. Please try again later.",t.field_state=!1}))},setSelectedClient:function(){var t=this,e=_.find(this.filter_client,(function(e){return e.value==t.form_data.client_id}));_.isUndefined(e)?(this.form_data.client_number="",this.form_data.client_name="",this.form_data.client_phone_number="",this.form_data.client_mobile_number="",this.form_data.client_address="",this.form_data.client_email=""):(this.form_data.client_number=e.client_number,this.form_data.client_name=e.text,this.form_data.client_phone_number=e.client_phone_number,this.form_data.client_mobile_number=e.client_mobile_number,this.form_data.client_address=e.client_address,this.form_data.client_email=e.client_email)},setSelectedSales:function(){var t=this,e=_.find(this.filter_sales,(function(e){return e.value==t.form_data.sales_id}));_.isUndefined(e)?(this.form_data.sales_name="",this.form_data.agency_name="",this.form_data.main_coordinator="",this.form_data.regional_coordinator="",this.form_data.main_coor_id="",this.form_data.regional_coor_id="",this.form_data.agent_id=""):(this.form_data.sales_name=e.text,this.form_data.main_coor_id=e.main_coordinator_id,this.form_data.regional_coor_id=e.regional_coordinator_id,this.form_data.agent_id=e.agency_id,this.form_data.agency_name=e.agency_name,this.form_data.main_coordinator=e.main_coordinator,this.form_data.regional_coordinator=e.regional_coordinator)},setSelectedUnitType:function(){var t=this,e=_.find(this.filter_unit_type,(function(e){return e.value==t.form_data.id_unit_type}));_.isUndefined(e)?(this.form_data.closing_fee="",this.form_data.unit_type="",this.form_data.points=""):(this.form_data.unit_type=e.text,this.form_data.closing_fee=e.closing_fee,this.form_data.points=e.point)},paymentType:function(){this.total_amount="0",this.first_payment="0",this.dp_amount="0",this.installment_time="1",this.due_date="0",this.credits="0"},setSelectedProgram:function(){var t=this,e=_.find(this.filter_tipe_programs,(function(e){return e.id==t.form_data.program_id}));_.isUndefined(e)?this.program={nama_program:"",harga_termasuk:[],harga_tidak_termasuk:[],gimmick:"",keterangan_program:""}:this.program={nama_program:e.nama_program,harga_termasuk:e.harga_termasuk,harga_tidak_termasuk:e.harga_tidak_termasuk,gimmick:e.gimmick,keterangan_program:e.keterangan}}}},s=a("KHd+"),d=Object(s.a)(m,void 0,void 0,!1,null,null,null);e.default=d.exports}}]);