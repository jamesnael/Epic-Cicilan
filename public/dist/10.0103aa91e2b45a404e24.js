(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{GMdP:function(e,t,i){"use strict";i.r(t);var a=i("e7F3"),s=i("TJPC"),l=i("enAU");Object(a.c)("required",s.h),Object(a.c)("email",s.c),Object(a.c)("max",s.e),Object(a.c)("min",s.f),Object(a.c)("numeric",s.g),Object(a.c)("between",s.a),Object(a.d)("id",l);var r={components:{ValidationObserver:a.a,ValidationProvider:a.b},props:{slug:{type:String,default:""},uri:{type:String,required:!0},redirectUri:{type:String,required:!0},dataUri:{type:String,default:""},deleteText:{type:String,default:"Delete"},deleteIcon:{type:String,default:"mdi-trash-can-outline"},deleteColor:{type:String,default:"red lighten-1"},deleteConfirmationText:{type:String,default:"Are you sure want to delete this file ?"},deleteCancelText:{type:String,default:"Cancel"}},data:function(){return{promptDelete:!1,field_state:!1,formAlert:!1,deleteLoader:!1,formAlertText:"",formAlertState:"info",menu2:!1,modal:!1,form_data:{booking_id:"",profession:"",ktp_pemohon:"",submission_date:(new Date).toISOString().substr(0,10)},delete_file_type:"",files:[{title:"Fotocopy KTP Pemohon",file_name:"file_ktp_pemohon",url:"",showcase:""},{title:"Fotocopy KTP Suami/Istri",file_name:"file_ktp_suami_istri",url:"",showcase:""},{title:"Fotocopy NPWP Pribadi",file_name:"file_npwp",url:"",showcase:""},{title:"Fotocopy Buku Nikah",file_name:"file_surat_nikah",url:"",showcase:""},{title:"Fotocopy Kartu Keluarga",file_name:"file_kk",url:"",showcase:""}]}},mounted:function(){this.setData()},methods:{pairingUploadedUrl:function(e){"Pengusaha"!=this.form_data.client_profession?(this.files.push({title:"Asli Slip Gaji (3 Bln Terakhir)",file_name:"file_slip_gaji",url:"",showcase:""}),this.files.push({title:"Surat Keterangan Kerja",file_name:"file_keterangan_kerja",url:"",showcase:""}),this.files.push({title:"Fotocopy R/K Tab.3 bln Terakhir",file_name:"file_tabungan_3_bulan_terakhir",url:"",showcase:""})):(this.files.push({title:"Rek. Koran 6 Bln Bagi Pengusaha",file_name:"file_rekening_koran",url:"",showcase:""}),this.files.push({title:"Fotocopy SIUP",file_name:"file_siup",url:"",showcase:""}),this.files.push({title:"Fotocopy TDP/NIB",file_name:"file_tdp",url:"",showcase:""}),this.files.push({title:"Fotocopy Akte Pendirian/Perubahan",file_name:"file_akta",url:"",showcase:""}),this.files.push({title:"Fotocopy Akte Pengesahan Menkeh",file_name:"file_pengesahan",url:"",showcase:""}),this.files.push({title:"SK Domisili",file_name:"file_sk_domisili",url:"",showcase:""}),this.files.push({title:"Surat Keterangan Usaha/Sewa",file_name:"file_keterangan_usaha",url:"",showcase:""}),this.files.push({title:"NPWP Perusahaan",file_name:"file_npwp_perusahaan",url:"",showcase:""}),this.files.push({title:"Pembukuan Perusahaan",file_name:"file_buku_perusahaan",url:"",showcase:""})),this.files.push({title:"SPT (Optional)",file_name:"file_spt",url:"",showcase:""}),this.files.push({title:"File Pendukung (Optional)",file_name:"file_other",url:"",showcase:""}),_.forEach(this.files,(function(t){var i,a,s="url_"+t.file_name;t.url=null!==(i=e[s])&&void 0!==i?i:"",t.showcase=null!==(a=e[t.file_name])&&void 0!==a?a:""}))},setData:function(){var e=this;this.dataUri&&(this.field_state=!0,axios.get(this.dataUri).then((function(t){if(t.data.success){var i=t.data.data;console.log(i),e.form_data={booking_id:i.id,slug:i.slug,client_name:i.client.client_name,client_profession:i.client.profession,unit_name:i.unit.unit_number+"/"+i.unit.unit_block,unit_price:e.number_format(i.total_amount),submission_date:i.document?i.document.submission_date:""},e.pairingUploadedUrl(i.document),e.field_state=!1}else e.formAlert=!0,e.formAlertState="error",e.formAlertText=t.data.message,e.field_state=!1})).catch((function(t){e.tableAlert=!0,e.tableAlertState="error",e.tableAlertText="Oops, something went wrong. Please try again later.",e.field_state=!1})))},submit:function(){var e=this;this.$refs.observer.validate().then((function(t){t&&e.postFormData()}))},clear:function(){this.form_data={},this.$refs.observer.reset()},postFormData:function(){var e=this,t=new FormData(this.$refs["post-form"]);this.dataUri&&(t.append("_method","put"),t.append("booking_id",this.form_data.booking_id),t.append("submission_date",this.form_data.submission_date)),this.field_state=!0,axios.post(this.uri,t).then((function(t){t.data.success?(e.formAlert=!0,e.formAlertState="success",e.formAlertText=t.data.message,setTimeout((function(){e.goto(e.redirectUri)}),6e3)):(e.formAlert=!0,e.formAlertState="error",e.formAlertText=t.data.message,e.field_state=!1)})).catch((function(t){e.tableAlert=!0,e.tableAlertState="error",e.tableAlertText="Oops, something went wrong. Please try again later.",e.field_state=!1}))},promptDeleteItem:function(e){this.promptDelete=!0,this.delete_file_type=e},removeUploadedFile:function(){var e=this,t=new FormData;axios.delete(this.base_url()+this.ziggy("document.remove-file",[this.slug,this.delete_file_type]).url(),t).then((function(t){t.data.success?(e.formAlert=!0,e.formAlertState="success",e.formAlertText=t.data.message):(e.formAlert=!0,e.formAlertState="error",e.formAlertText=t.data.message),e.deleteLoader=!1,e.promptDelete=!1,e.setData()})).catch((function(t){e.formAlert=!0,e.formAlertState="error",e.formAlertText="Oops, something went wrong. Please try again later.",e.deleteLoader=!1,e.promptDelete=!1}))}}},o=i("KHd+"),n=Object(o.a)(r,void 0,void 0,!1,null,null,null);t.default=n.exports}}]);